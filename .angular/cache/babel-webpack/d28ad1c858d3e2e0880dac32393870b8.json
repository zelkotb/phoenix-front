{"ast":null,"code":"import { UpdateAccountRequest } from 'src/app/model/account';\nimport { environment } from 'src/environments/environment';\nimport { ChangePasswordComponent } from '../change-password/change-password.component';\nimport { ConfirmationComponent } from '../common/confirmation/confirmation.component';\nimport { SnackBarFailureComponent } from '../common/snack-bar-failure/snack-bar-failure.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/account.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"src/app/services/login.service\";\nimport * as i5 from \"@angular/material/dialog\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/material/card\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/material/icon\";\nimport * as i12 from \"@angular/material/button\";\nimport * as i13 from \"@angular/material/tooltip\";\nimport * as i14 from \"../common/spinner/spinner.component\";\n\nfunction UpdateAccountComponent_div_0_mat_error_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" champs requis \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateAccountComponent_div_0_mat_error_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" champs requis \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateAccountComponent_div_0_mat_error_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" champs requis \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateAccountComponent_div_0_mat_error_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" l'adresse mail n'est pas valide \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateAccountComponent_div_0_mat_error_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" champs requis \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateAccountComponent_div_0_mat_error_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Le num\\u00E9ro de t\\u00E9l\\u00E9phone contient 10 chiffres \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"color\": a0\n  };\n};\n\nfunction UpdateAccountComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"form\", 3, 4);\n    i0.ɵɵlistener(\"ngSubmit\", function UpdateAccountComponent_div_0_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r14);\n\n      const _r2 = i0.ɵɵreference(2);\n\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.onSubmit(_r2);\n    });\n    i0.ɵɵelementStart(3, \"mat-card\", 5);\n    i0.ɵɵelementStart(4, \"mat-card-title\", 6);\n    i0.ɵɵtext(5, \"Informations de Votre Compte\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 7);\n    i0.ɵɵelementStart(7, \"mat-form-field\", 8);\n    i0.ɵɵelementStart(8, \"mat-label\");\n    i0.ɵɵtext(9, \"Nom\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"input\", 9, 10);\n    i0.ɵɵlistener(\"ngModelChange\", function UpdateAccountComponent_div_0_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.updateAccountRequest.lastName = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"mat-icon\", 11);\n    i0.ɵɵtext(13, \"account_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"mat-hint\", 12);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, UpdateAccountComponent_div_0_mat_error_16_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\", 7);\n    i0.ɵɵelementStart(18, \"mat-form-field\", 8);\n    i0.ɵɵelementStart(19, \"mat-label\");\n    i0.ɵɵtext(20, \"Pr\\u00E9nom\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"input\", 14, 15);\n    i0.ɵɵlistener(\"ngModelChange\", function UpdateAccountComponent_div_0_Template_input_ngModelChange_21_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.updateAccountRequest.firstName = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"mat-icon\", 11);\n    i0.ɵɵtext(24, \"account_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"mat-hint\", 12);\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(27, UpdateAccountComponent_div_0_mat_error_27_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"p\", 7);\n    i0.ɵɵelementStart(29, \"mat-form-field\", 8);\n    i0.ɵɵelementStart(30, \"mat-label\");\n    i0.ɵɵtext(31, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"input\", 16, 17);\n    i0.ɵɵlistener(\"ngModelChange\", function UpdateAccountComponent_div_0_Template_input_ngModelChange_32_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.updateAccountRequest.email = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"mat-icon\", 11);\n    i0.ɵɵtext(35, \"mail_outline\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"mat-hint\");\n    i0.ɵɵtext(37, \"* ex : email@gmail.com\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"mat-hint\", 12);\n    i0.ɵɵtext(39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(40, UpdateAccountComponent_div_0_mat_error_40_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵtemplate(41, UpdateAccountComponent_div_0_mat_error_41_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"p\", 7);\n    i0.ɵɵelementStart(43, \"mat-form-field\", 18);\n    i0.ɵɵelementStart(44, \"mat-label\");\n    i0.ɵɵtext(45, \"Num\\u00E9ro de t\\u00E9l\\u00E9phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(46, \"input\", 19, 20);\n    i0.ɵɵlistener(\"ngModelChange\", function UpdateAccountComponent_div_0_Template_input_ngModelChange_46_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.updateAccountRequest.phone = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(48, \"mat-icon\", 11);\n    i0.ɵɵtext(49, \" local_phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"mat-hint\", 12);\n    i0.ɵɵtext(51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(52, \"mat-hint\");\n    i0.ɵɵtext(53, \"* ex : 0600000000\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(54, UpdateAccountComponent_div_0_mat_error_54_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵtemplate(55, UpdateAccountComponent_div_0_mat_error_55_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(56, \"mat-card-actions\", 21);\n    i0.ɵɵelementStart(57, \"button\", 22);\n    i0.ɵɵtext(58, \"Valider les modifications\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(59, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function UpdateAccountComponent_div_0_Template_button_click_59_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.openChangePasswordPopUp();\n    });\n    i0.ɵɵtext(60, \"Modifier le mot de passe\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(61, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function UpdateAccountComponent_div_0_Template_button_click_61_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.openDeleteAccountPopUp();\n    });\n    i0.ɵɵelementStart(62, \"mat-icon\", 24);\n    i0.ɵɵtext(63, \"delete_sweep \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(64, \"mat-card-footer\");\n    i0.ɵɵelementStart(65, \"mat-card-subtitle\");\n    i0.ɵɵtext(66, \"Toutes les champs avec \\\"*\\\" sont obligatoires\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r2 = i0.ɵɵreference(2);\n\n    const _r3 = i0.ɵɵreference(11);\n\n    const _r5 = i0.ɵɵreference(22);\n\n    const _r7 = i0.ɵɵreference(33);\n\n    const _r10 = i0.ɵɵreference(47);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.updateAccountRequest.lastName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(21, _c0, _r3.invalid && (_r3.dirty || _r3.touched) ? \"red\" : \"black\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", (_r3.value == null ? null : _r3.value.length) || 0, \"/50\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.invalid && (_r3.dirty || _r3.touched) && _r3.errors.required);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.updateAccountRequest.firstName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(23, _c0, _r5.invalid && (_r5.dirty || _r5.touched) ? \"red\" : \"black\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", (_r5.value == null ? null : _r5.value.length) || 0, \"/50\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.invalid && (_r5.dirty || _r5.touched) && _r5.errors.required);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.updateAccountRequest.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(25, _c0, _r7.invalid && (_r7.dirty || _r7.touched) ? \"red\" : \"black\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", (_r7.value == null ? null : _r7.value.length) || 0, \"/50\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r7.invalid && (_r7.dirty || _r7.touched) && _r7.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r7.invalid && (_r7.dirty || _r7.touched) && _r7.errors.email && !_r7.errors.required);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.updateAccountRequest.phone);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(27, _c0, _r10.invalid && (_r10.dirty || _r10.touched) ? \"red\" : \"black\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", (_r10.value == null ? null : _r10.value.length) || 0, \"/10\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", _r10.invalid && (_r10.dirty || _r10.touched) && _r10.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r10.invalid && (_r10.dirty || _r10.touched) && _r10.errors.pattern);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.loading || !_r2.valid);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.loading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.loading);\n  }\n}\n\nfunction UpdateAccountComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵelement(1, \"app-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let UpdateAccountComponent = /*#__PURE__*/(() => {\n  class UpdateAccountComponent {\n    constructor(accountService, route, _snackBar, loginService, dialog, router) {\n      this.accountService = accountService;\n      this.route = route;\n      this._snackBar = _snackBar;\n      this.loginService = loginService;\n      this.dialog = dialog;\n      this.router = router;\n      this.updateAccountRequest = {\n        email: \"\",\n        firstName: \"\",\n        lastName: \"\",\n        phone: \"\",\n        city: \"\"\n      };\n    }\n\n    ngOnInit() {\n      this.loading = true;\n      this.routeSub = this.route.params.subscribe(params => {\n        this.id = params['id'];\n        this.accountService.getAccount(this.id).subscribe(result => {\n          this.getAccountResponse = result;\n          this.updateAccountRequest = new UpdateAccountRequest();\n          this.updateAccountRequest.email = this.getAccountResponse.email;\n          this.updateAccountRequest.firstName = this.getAccountResponse.firstName;\n          this.updateAccountRequest.lastName = this.getAccountResponse.lastName;\n          this.updateAccountRequest.phone = this.getAccountResponse.phone;\n          this.updateAccountRequest.city = this.getAccountResponse.city;\n          this.loading = false;\n        }, error => {\n          this.loading = false;\n          this.openSnackBarFailure(error);\n        });\n      });\n    }\n\n    onSubmit(f) {\n      this.loading = true;\n      this.accountService.updateAccount(this.updateAccountRequest, this.getAccountResponse.id).subscribe(result => {\n        this.updateAccountResponse = result;\n        this.updateAccountRequest.email = this.updateAccountResponse.email;\n        this.updateAccountRequest.firstName = this.updateAccountResponse.firstName;\n        this.updateAccountRequest.lastName = this.updateAccountResponse.lastName;\n        this.updateAccountRequest.phone = this.updateAccountResponse.phone;\n        this.updateAccountRequest.city = this.updateAccountResponse.city;\n\n        if (this.updateAccountResponse.token != undefined && this.updateAccountResponse.token != \"\") {\n          this.loginService.updateToken(this.updateAccountResponse.token, this.updateAccountResponse.email);\n        }\n\n        this.loading = false;\n      }, error => {\n        this.loading = false;\n        this.openSnackBarFailure(error);\n      });\n    }\n\n    openSnackBarFailure(message) {\n      this._snackBar.openFromComponent(SnackBarFailureComponent, {\n        data: message,\n        panelClass: 'app-snack-bar-failure',\n        duration: 5000\n      });\n    }\n\n    openChangePasswordPopUp() {\n      const dialogRef = this.dialog.open(ChangePasswordComponent, {\n        data: {\n          id: this.id\n        }\n      });\n    }\n\n    openDeleteAccountPopUp() {\n      const dialogRef = this.dialog.open(ConfirmationComponent, {\n        data: {\n          text: \"Êtes-Vous sûr de supprimer ce Compte !! ?\"\n        }\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result === \"confirmed\") {\n          this.accountService.deactivateAccount(this.id).subscribe(result => {\n            this.router.navigate([environment.base + '/login']);\n            this.loginService.logout();\n          }, error => {\n            this.openSnackBarFailure(error);\n          });\n        }\n      });\n    }\n\n    ngOnDestroy() {\n      this.routeSub.unsubscribe();\n    }\n\n  }\n\n  UpdateAccountComponent.ɵfac = function UpdateAccountComponent_Factory(t) {\n    return new (t || UpdateAccountComponent)(i0.ɵɵdirectiveInject(i1.AccountService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.MatSnackBar), i0.ɵɵdirectiveInject(i4.LoginService), i0.ɵɵdirectiveInject(i5.MatDialog), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  UpdateAccountComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UpdateAccountComponent,\n    selectors: [[\"app-update-account\"]],\n    decls: 2,\n    vars: 2,\n    consts: [[\"class\", \"register-container\", 4, \"ngIf\"], [\"class\", \"table-container\", 4, \"ngIf\"], [1, \"register-container\"], [3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"register-card\"], [1, \"register-title\"], [1, \"d-flex\", \"justify-content-center\"], [\"appearance\", \"outline\", 1, \"p-6\"], [\"required\", \"\", \"name\", \"lastName\", \"matInput\", \"\", \"placeholder\", \"Placeholder\", 3, \"ngModel\", \"ngModelChange\"], [\"lastName\", \"ngModel\"], [\"matSuffix\", \"\", 3, \"ngStyle\"], [\"align\", \"end\"], [4, \"ngIf\"], [\"required\", \"\", \"name\", \"firstName\", \"matInput\", \"\", \"placeholder\", \"Placeholder\", 3, \"ngModel\", \"ngModelChange\"], [\"firstName\", \"ngModel\"], [\"email\", \"\", \"name\", \"email\", \"required\", \"\", \"matInput\", \"\", \"placeholder\", \"Placeholder\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [\"appearance\", \"outline\"], [\"name\", \"phone\", \"maxlength\", \"10\", \"required\", \"\", \"matInput\", \"\", \"placeholder\", \"Placeholder\", \"pattern\", \"[0-9]{10}\", 3, \"ngModel\", \"ngModelChange\"], [\"phone\", \"ngModel\"], [1, \"register-button\"], [\"color\", \"primary\", \"type\", \"submit\", \"mat-raised-button\", \"\", 3, \"disabled\"], [\"color\", \"primary\", \"type\", \"button\", \"mat-raised-button\", \"\", 3, \"disabled\", \"click\"], [\"matTooltip\", \"Supprimer le compte\"], [1, \"table-container\"]],\n    template: function UpdateAccountComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, UpdateAccountComponent_div_0_Template, 67, 29, \"div\", 0);\n        i0.ɵɵtemplate(1, UpdateAccountComponent_div_1_Template, 2, 0, \"div\", 1);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      }\n    },\n    directives: [i6.NgIf, i7.ɵNgNoValidate, i7.NgControlStatusGroup, i7.NgForm, i8.MatCard, i8.MatCardTitle, i9.MatFormField, i9.MatLabel, i10.MatInput, i7.DefaultValueAccessor, i7.RequiredValidator, i7.NgControlStatus, i7.NgModel, i11.MatIcon, i9.MatSuffix, i6.NgStyle, i9.MatHint, i7.EmailValidator, i7.MaxLengthValidator, i7.PatternValidator, i8.MatCardActions, i12.MatButton, i13.MatTooltip, i8.MatCardFooter, i8.MatCardSubtitle, i9.MatError, i14.SpinnerComponent],\n    styles: [\".register-card[_ngcontent-%COMP%]{padding-left:120px;padding-right:100px;margin-top:20px}.register-container[_ngcontent-%COMP%], .register-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.register-title[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}mat-form-field[_ngcontent-%COMP%]{width:100%}\"]\n  });\n  return UpdateAccountComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}